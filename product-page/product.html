<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tour-packages</title>
    <link rel="stylesheet" href="/product-page/product.css" />
  </head>
  <body>
    <!-- navbar -->
    <div
      class="nav-box"
      style="
        background-image: url('https://cdn1.tripoto.com/assets/2.9/img/home_banner_road.jpg');
        background-size: 100% 100%;
      "
    >
      <div class="nav-top">
        <div class="nav-top-left"><a href="#">Travelwaala</a></div>
        <div class="nav-top-right">
          <div><a href="#">Inspirations</a></div>
          <div><a href="#">Forum</a></div>
          <div><a href="#">Packages</a></div>
          <div><a href="#">Publish Trip</a></div>
          <div><a href="#">Sign in</a></div>
        </div>
      </div>
      <div class="nav-middle"><h1>Exclusive Tours & Holiday Packages</h1></div>
      <input
        type="text"
        oninput="search()"
        id="search"
        placeholder="Search Packages For Destinations"
      />
    </div>

    <header></header>

    <!-- cart-item-pakages- -->
    <section id="packages">
      <p>✈️ ≫ Tripoto's Exclusive Tours & Holiday Packages</p>
      <h1>Tripoto's Mindful Retreats</h1>
      <div id="pakages-cards"></div>
    </section>
    <!-- <<fw22_0023>_day-3> -->
    <!-- footer- -->
    <footer></footer>
  </body>
</html>
<script>
  async function getpakages() {
    try {
      let res = await fetch(
        "https://636a91d9c07d8f936da2035c.mockapi.io/travelWaala"
      );
      if (res.ok) {
        let data = await res.json();
        renderpakages(data);
        console.log(data);
      }
    } catch (error) {
      return "error";
    }
  }
  getpakages(); 

  function renderpakages(data) {
    let render = document.getElementById("pakages-cards");
    render.innerHTML = `
      ${data
        .map((item) => {
         
         
          return getascard(
            item.img,
            item.discription,
            item.location,

            item.price
          );
        })
        .join("")}
    `;
  }

  function getascard(img, discription, location, price) {
    return `
    <div>
    <img src="${img}"/>
      
    <div class="discription">${discription.substring(5, 100)}</div>
     
    <div class="location"> 
      <img src="/product-page/location-svg_.svg" >
      <span>${location}</span>
      <button>3D.2N</button>
    </div>
      
    <div class="price">
      <span>$ ${price + " /person"} </span>
      <button onclick="booknow()">Book Now</button>
    </div>
    
    <div class="pakage-Retreats">
      <img src="https://cdn1.tripoto.com/media/filter/mss/img/2165009/UserPhoto/1628574904_tripoto_s_mindful_retreats.jpg"/>
      <span>Tripoto's Mindful Retreats ✔️</span>
    </div>
    
    </div>
    `;
  }
  async function search() {
    try {
      let q = document.getElementById("search").value;
      let res = await fetch(
        "https://636a91d9c07d8f936da2035c.mockapi.io/travelWaala"
      );
      let dataarr = await res.json();
      let newData = dataarr.filter(function (item) {
        return (
          item.location.toLowerCase().includes(q.toLowerCase()) ||
          item.price.toLowerCase().includes(q.toLowerCase())
        );
      });
      renderpakages(newData);
    } catch (err) {
      return err;
    }
  }

  function booknow() {
    window.location = "/product-page/detail.html";
  }
</script>
